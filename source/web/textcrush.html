<script src="../game/classes/Util.js"></script>
<script src="../game/classes/Symbol.js"></script>
<script src="../game/classes/Neighbor.js"></script>
<script src="../game/classes/Position.js"></script>
<script src="../game/classes/Board.js"></script>
<script src="../game/Game.js"></script>
<script src="../game/classes/Tile.js"></script>
<script src="../game/classes/Display.js"></script>
<script>

    function initialize() {

        let c = document.createElement("canvas");

        c.setAttribute("width", window.innerWidth.toString());
        c.setAttribute("height", window.innerHeight.toString());

        document.body.style.margin = "0";
        document.body.appendChild(c);

        let g = new Game(7, 7);
        let d = new Display(c, g);

        function onClick(e) {
            console.log("inner handling click");

            let position = d.onClick(e.x, e.y);

            d.draw();
            let delay = 150;
            setTimeout(function () {

                //g.onRemove(position.x, position.y, {});
                d.draw();

                setTimeout(function () {
                    g.moveDown();
                    d.draw();

                }, delay);
            }, delay);
        }
        console.log("registering click");

        c.addEventListener('click', (e) => {
            console.log("outer handling click");

            onClick(e)
        });

        d.draw();
    }

    document.addEventListener("DOMContentLoaded", initialize);

</script>
